<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Archipeladoku</title>
    <style>body { padding: 0; margin: 0; }</style>
    <script src="app.js"></script>
</head>
<body>
    <div id="ui-container"></div>
    <script>
        let uiContainer = document.getElementById('ui-container');

        let ui = Elm.Archipeladoku.UI.init({
            node: uiContainer,
            flags: {}
        });
        let worker = new Worker('worker.js');

        ui.ports.generateBoard.subscribe(data => {
            worker.postMessage({ type: 'generateBoard', data: data });
        });

        worker.onmessage = function(event) {
            console.log(event.data.type, event.data.data);

            switch(event.data.type) {
                case 'sendBoard':
                    ui.ports.receiveBoard.send(event.data.data);

                    break;

                default:
                    console.log('Unknown message type:', event.data.type);
            }
        };

    </script>
</body>
</html>
